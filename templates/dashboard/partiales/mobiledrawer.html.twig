<!-- Mobile Drawer -->
<!-- Mobile Menu Overlay -->
<div id="mobileMenuOverlay" class="fixed inset-0 bg-black/50 z-40 hidden" aria-hidden="true"></div>

<!-- Mobile Menu -->
<div id="mobileMenu"
  class="fixed inset-y-0 left-0 w-72 bg-gradient-to-b from-green-700 via-green-600 to-green-700 z-50 transform -translate-x-full transition-transform duration-300 ease-in-out shadow-xl">
  <aside class="absolute top-0 left-0 bottom-0 w-72 bg-transparent border-r border-green-800 flex flex-col">
    <div class="px-5 py-4 flex items-center gap-3 border-b border-green-500/30">
      <a href="{{path('app_home')}}">
        <img src="{{asset ('images/estm.png')}}" alt="Logo" class="h-20 brightness-0 invert" />
      </a>

    </div>

    <div class="px-4 py-4 border-y border-green-500/30">
      <div class="flex flex-col gap-3">
        <div class="flex items-center gap-3">
          <div class="h-10 w-10 rounded-full bg-white/20 flex items-center justify-center text-white backdrop-blur-sm">
            <i class="fa-solid fa-user"></i>
          </div>
          <div>
            <div class="font-semibold text-sm text-white leading-tight">Bienvenue, <span id="userName"></span></div>
            <div class="text-xs text-green-100">{{ app.user.firstname }} {{ app.user.lastname }}</div>
            <div class="flex flex-col gap-0.5 mt-1">
          
              {% if app.user.verificationStatus == "Vérifié" %}
                <div class="flex items-center gap-1.5 text-[10px] font-bold text-green-300">
                  <i class="fa-solid fa-check-circle text-[8px]"></i> COMPTE VÉRIFIÉ
                </div>
              {% elseif app.user.verificationStatus == "En attente" %}
                <div class="flex items-center gap-1.5 text-[10px] font-bold text-yellow-300">
                  <i class="fa-solid fa-clock text-[8px] animate-pulse"></i> VÉRIF. EN COURS
                </div>
              {% else %}
                <div class="flex items-center gap-1.5 text-[10px] font-bold text-orange-300">
                  <i class="fa-solid fa-triangle-exclamation text-[8px]"></i> NON VÉRIFIÉ
                </div>
              {% endif %}
            </div>
          </div>
        </div>

        {# Verification Status #}
        <div class="mt-1">
          {% if app.user.verificationStatus == "En attente" %}
          <div class="relative group">
            <button disabled
              class="w-full inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-yellow-400/90 text-green-950 cursor-not-allowed text-xs font-bold border border-yellow-300/50 shadow-sm">
              <i class="fa-regular fa-clock animate-pulse"></i>
              Vérification en cours...
            </button>
            <div
              class="absolute z-10 hidden group-active:block focus:block w-full p-3 mt-2 text-xs text-gray-700 bg-white border border-gray-200 rounded-lg shadow-xl">
              Votre demande de vérification est en cours de traitement par notre équipe.
            </div>
          </div>
          {% elseif app.user.verificationStatus == "Vérifié" %}
          <div class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-green-500/20 border border-green-400/30 text-[10px] font-bold text-green-100 uppercase tracking-wider">
            <i class="fa-solid fa-check-circle"></i>
            Compte Vérifié
          </div>
          {% else %}
          <a href="{{path('app_compte_verification')}}"
            class="w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-white/20 hover:bg-white/30 text-white text-xs font-bold transition-all border border-white/10 shadow-sm">
            <i class="fa-solid fa-user-shield"></i>
            Vérifier mon compte
          </a>
          {% endif %}
        </div>
      </div>
    </div>

    <nav class="mt-2 px-3 pb-4 space-y-1 flex-1 overflow-y-auto">
      <a href="{{path('app_dashboard')}}"
        class="flex items-center gap-3 px-3 py-3 rounded-lg hover:bg-white/10 text-white font-medium touch-target transition-all duration-200 {{ app.request.get('_route') starts with 'app_dashboard' ? 'bg-white/20 shadow-md' : '' }}">
        <i class="fa-solid fa-gauge w-6"></i><span>Tableau de bord</span>
      </a>
      <a href="{{path ('app_tontines_index')}}"
        class="flex items-center gap-3 px-3 py-3 rounded-lg hover:bg-white/10 text-white touch-target transition-all duration-200 {{ app.request.get('_route') starts with 'app_tontines' ? 'bg-white/20 shadow-md' : '' }}">
        <i class="fa-solid fa-coins w-6"></i><span>Mes tontines</span>
      </a>
      <a href="{{path ('app_transaction_index')}}"
        class="flex items-center gap-3 px-3 py-3 rounded-lg hover:bg-white/10 text-white touch-target transition-all duration-200 {{ app.request.get('_route') starts with 'app_transaction' ? 'bg-white/20 shadow-md' : '' }}">
        <i class="fa-solid fa-credit-card w-6"></i><span>Transactions</span>
      </a>
      <a href="{{path ('app_withdrawals_index')}}"
        class="flex items-center gap-3 px-3 py-3 rounded-lg hover:bg-white/10 text-white touch-target transition-all duration-200 {{ app.request.get('_route') starts with 'app_withdrawals_index' ? 'bg-white/20 shadow-md' : '' }}">
        <i class="fa-solid fa-wallet w-6"></i><span> Demandes de retrait</span>
      </a>

      <a href="{{path('app_settings')}}"
        class="flex items-center gap-3 px-3 py-3 rounded-lg hover:bg-white/10 text-white touch-target transition-all duration-200 {{ app.request.get('_route') starts with 'app_settings' ? 'bg-white/20 shadow-md' : '' }}">
        <i class="fa-solid fa-gear w-6"></i><span>Paramètres</span>
      </a>
      <a href="{{path('pin_change')}}"
        class="flex items-center gap-3 px-3 py-3 rounded-lg hover:bg-white/10 text-white touch-target transition-all duration-200 {{ app.request.get('_route') starts with 'pin_' ? 'bg-white/20 shadow-md' : '' }}">
        <i class="fa-solid fa-shield-alt w-6"></i><span>Sécurité PIN</span>
      </a>
      <a href="{{path ('app_aide')}}"
        class="flex items-center gap-3 px-3 py-3 rounded-lg hover:bg-white/10 text-white touch-target transition-all duration-200 {{app.request.get('_route') starts with 'app_aide' ? 'bg-white/20 shadow-md' : ''}}">
        <i class="fa-solid fa-circle-question w-6"></i><span>Aide & Support</span>
      </a>
    </nav>

    <div class="p-4 border-t border-green-500/30">
      <a href="{{path('app_logout')}}"
        class="w-full inline-flex items-center justify-center gap-2 px-3 py-3 rounded-lg border border-white/30 hover:bg-white/10 text-white touch-target transition-all duration-200">
        <i class="fa-solid fa-right-from-bracket"></i> <span>Se déconnecter</span>
      </a>
      <p class="text-xs text-green-100 text-center mt-3">© <span id="year2"></span> Efa Smart Finance</p>
    </div>
  </aside>
</div>