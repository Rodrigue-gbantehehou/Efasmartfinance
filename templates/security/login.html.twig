<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>EFA SMART FINANCE — Connexion</title>
		<meta name="description" content="Connexion à l'interface d'administration EFA Smart Finance."/>
		<script src="https://cdn.tailwindcss.com"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>

		<script>
			tailwind.config = {
theme: {
extend: {
colors: {
green-700: '#1a4d2e',
secondary: '#f6c90e',
accent: '#2e7d32',
light: '#f8f9fa'
}
}
}
}
		</script>
		<style>
			.gradient-bg {
				background: linear-gradient(135deg, #1a4d2e 0%, #2e7d32 100%);
			}
			.shadow-custom {
				box-shadow: 0 8px 40px rgba(0, 0, 0, .18);
			}
		</style>
	</head>
	<body
		class="min-h-screen gradient-bg flex items-center justify-center p-6">
		<!-- Carte de connexion -->
		<main class="w-full max-w-md">
			<div class="bg-white/95 backdrop-blur rounded-2xl shadow-custom p-8">
				<div class="flex items-center justify-center mb-6">
					<img src="/images/logovert.png" alt="Logo EFA Smart Finance" class="h-20 "/>
				<!-- Carte de connexion<div>
						<h1 class="text-xl font-extrabold text-green-700 leading-tight">EFA SMART FINANCE</h1>
						<p class="text-sm text-gray-500">Interface d’administration</p>
					</div> -->	
				</div>

				<h2 class="text-lg font-semibold text-gray-800 mb-2">Connexion</h2>
				<p class="text-sm text-gray-500 mb-6">Entre ton email ou identifiant  et ton mot de passe pour accéder au tableau de bord.</p>

				<form method="post" action="" class="space-y-4" novalidate>
					<!-- Email ou uuid -->
					{% if error %}
						<div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
					{% endif %}

					{% if app.user %}
						<div class="mb-3">
							Vous êtes connecté en tant que
							{{ app.user.firstname }} {{ app.user.lastname }},
							<a class="text-green-700 hover:text-accent" href="{{ logout_path() }}">Se deconnecter</a>
						</div>
					{% endif %}
					<div>
						<label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email ou Identifiant </label>
						<div class="relative">
							<span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400 pointer-events-none">
								<i class="fa-regular fa-envelope"></i>
							</span>
							<input type="email" id="email" value="{{ last_username }}" name="identifier" required autocomplete="email" placeholder="exemple@domaine.com" class="pl-10 pr-3 py-2 w-full rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent"/>
						</div>
					</div>

					<!-- Mot de passe -->
					<div>
						<label for="password" class="block text-sm font-medium text-gray-700 mb-1">Mot de passe</label>
						<div class="relative">
							<span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400 pointer-events-none">
								<i class="fa-solid fa-lock"></i>
							</span>
							<input type="password" name="password" id="inputPassword" required autocomplete="current-password" placeholder="••••••••" class="pl-10 pr-10 py-2 w-full rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent"/>
							<button type="button" id="togglePwd" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600" aria-label="Afficher/masquer le mot de passe">
								<i class="fa-regular fa-eye" id="eyeIcon"></i>
							</button>
						</div>
					</div>

				
					<div class="flex items-center justify-between text-sm">
						<label class="inline-flex items-center gap-2 select-none">
							<input type="checkbox" class="rounded border-gray-300 text-green-700 focus:ring-secondary"/>
							<span class="text-gray-600">Se souvenir de moi</span>
						</label>
							<!-- Options 
						<a href="#" class="text-green-700 hover:text-accent">Mot de passe oublié ?</a>-->
					</div>
					<input
					type="hidden" name="_csrf_token" data-controller="csrf-protection" value="{{ csrf_token('authenticate') }}">

					<!-- Bouton -->
					<button type="submit" class="w-full bg-green-600 text-white font-bold py-2.5 rounded-lg hover:bg-yellow-500 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary">
						Valider
					</button>
				</form>

				<!-- Lien inscription -->
				<p class="mt-4 text-sm text-gray-600 text-center">
					Pas encore de compte ?
					<a href="{{path('app_register')}}" class="font-semibold text-green-700 hover:text-accent">Créer un compte</a>
				</p>

				<!-- Lien retour site -->
				<div class="mt-6 text-center">
					<a href="{{path('app_home')}}" class="inline-flex items-center text-sm text-gray-600 hover:text-green-700">
						<i class="fa-solid fa-arrow-left mr-2"></i>Retour au site
					</a>
				</div>
			</div>

			<p class="text-center text-white/80 text-xs mt-4">
				©
				<span id="year"></span>
				EFA Smart Finance — Tous droits réservés
			</p>
		</main>

		<script>
            // Fonction pour basculer l'affichage du mot de passe
            const toggleBtn = document.getElementById('togglePwd');
            const passwordInput = document.getElementById('inputPassword');
            const eyeIcon = document.getElementById('eyeIcon');

            if (toggleBtn && passwordInput && eyeIcon) {
                toggleBtn.addEventListener('click', function() {
                    // Bascule le type d'entrée
                    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                    passwordInput.setAttribute('type', type);
                    
                    // Change l'icône
                    if (type === 'password') {
                        eyeIcon.classList.remove('fa-eye-slash');
                        eyeIcon.classList.add('fa-eye');
                    } else {
                        eyeIcon.classList.remove('fa-eye');
                        eyeIcon.classList.add('fa-eye-slash');
                    }
                });
            }

            // Année dynamique
            document.getElementById('year').textContent = new Date().getFullYear();
        </script>
	</body>
</html>
